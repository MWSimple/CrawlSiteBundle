<?php

namespace MWSimple\Bundle\CrawlSiteBundle\Entity;

use Doctrine\ORM\EntityRepository;

/**
 * CrawlSiteRepository
 *
 * This class was generated by the Doctrine ORM. Add your own custom
 * repository methods below.
 */
class CrawlSiteRepository extends EntityRepository
{
	public function findSites()
    {
        return $this->createQueryBuilder('s')
        	->select('s, t')
        	->where('s.active = true')
	        ->leftJoin('s.tags', 't', 'WITH', 't.active = true')
	        ->getQuery()
	        ->getResult()
        ;
    }
}
